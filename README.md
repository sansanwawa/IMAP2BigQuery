# IMAP2BigQuery
Fetch data from CSV's file that attached from formatted email then send it to Google BigQuery

# Parameters and configurations
You can find the configuration setting at your **main.py**'s file . 

1.Google BigQuery Configuration

```python
#BigQuery Configuration
PROJECT_ID                      = 'Your Project Id'
DATASET_ID                      = 'Your Data Set Id'
SECRET_SERVICE_ACCOUNT_KEY_FILE = 'Your Json Key.json'   
```
* projectId      : 

   The project id that you need to create under BigQuery Console at the first time
* datasetId      : 

  The dataset Id (dataset name) that require to be created first at google console

* accountKeyFile : 

  A credential file that generated by the BigQuery Console under **service accounts**.
  The credential file need to place as same as current file that will be installed.

2.IMAP Configuration
```python
#Email configurations
IMAP_HOST                       = 'imap.gmail.com'
IMAP_USER                       = 'Your username of email'
IMAP_PASSWORD                   = 'Your password of email'
IMAP_PORT                       = 993
```

* IMAP_HOST :

  Your IMAP's server that will use

* IMAP_USER :
  
  An Email or Username that you wish to login 

* IMAP_PASSWORD :

  Your email password

* IMAP_PORT : 

  IMAP's port of the server 


3.Software dependencies

This program requires **google,gcloud**  dependency to be working, first thing to do is install **google,gcloud** under you operating system.

4.Running the program

To run the program, you can copy entire folder that already have python files.

Then is simply run the project by running : 

```bash
$ python3 main.py
```


# Email Format

As we are using email to retrieve a data, it need to specify the format that will match with the code that has been made.

* Email Subject

  Email subject will read at the first time from its code. So there need to be define as well.
  The email subject would be like :
  
 ```bash
  [sequence-number] – [table-name] | [header-row-number] [free-text]
```

* Sequence-number : 

  The sequence number that need to be defined on each email.
  
* table-name : 
  
  This table name will use for Google Big Query’s table name

* “|” (Pipe character) : 
   
   Separate character
   
* Header-row-number : 
  
  Define the row number of the header of its CSV’s file.

* Free-text: 
  
  The free text that wil use an email itself for better finding at email server

  

